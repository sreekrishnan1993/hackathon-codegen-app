"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/convert/route";
exports.ids = ["app/api/convert/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "console":
/*!**************************!*\
  !*** external "console" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("console");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "diagnostics_channel":
/*!**************************************!*\
  !*** external "diagnostics_channel" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("diagnostics_channel");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("perf_hooks");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "stream/web":
/*!*****************************!*\
  !*** external "stream/web" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("stream/web");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "util/types":
/*!*****************************!*\
  !*** external "util/types" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("util/types");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconvert%2Froute&page=%2Fapi%2Fconvert%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconvert%2Froute.ts&appDir=C%3A%5CReact%20app%5Chackathon-codegen-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReact%20app%5Chackathon-codegen-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconvert%2Froute&page=%2Fapi%2Fconvert%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconvert%2Froute.ts&appDir=C%3A%5CReact%20app%5Chackathon-codegen-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReact%20app%5Chackathon-codegen-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_React_app_hackathon_codegen_app_app_api_convert_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/convert/route.ts */ \"(rsc)/./app/api/convert/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/convert/route\",\n        pathname: \"/api/convert\",\n        filename: \"route\",\n        bundlePath: \"app/api/convert/route\"\n    },\n    resolvedPagePath: \"C:\\\\React app\\\\hackathon-codegen-app\\\\app\\\\api\\\\convert\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_React_app_hackathon_codegen_app_app_api_convert_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/convert/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb252ZXJ0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb252ZXJ0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29udmVydCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3QlMjBhcHAlNUNoYWNrYXRob24tY29kZWdlbi1hcHAlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNSZWFjdCUyMGFwcCU1Q2hhY2thdGhvbi1jb2RlZ2VuLWFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpZ21hLXRvLXNpdGVjb3JlLWNvbnZlcnRlci8/NGFhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxSZWFjdCBhcHBcXFxcaGFja2F0aG9uLWNvZGVnZW4tYXBwXFxcXGFwcFxcXFxhcGlcXFxcY29udmVydFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY29udmVydC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvbnZlcnRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvbnZlcnQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxSZWFjdCBhcHBcXFxcaGFja2F0aG9uLWNvZGVnZW4tYXBwXFxcXGFwcFxcXFxhcGlcXFxcY29udmVydFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jb252ZXJ0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconvert%2Froute&page=%2Fapi%2Fconvert%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconvert%2Froute.ts&appDir=C%3A%5CReact%20app%5Chackathon-codegen-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReact%20app%5Chackathon-codegen-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/convert/route.ts":
/*!**********************************!*\
  !*** ./app/api/convert/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _app_lib_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/storage */ \"(rsc)/./app/lib/storage.ts\");\n\n\n\n// Initialize OpenAI client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_2__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(request) {\n    try {\n        console.log(\"Convert API called\");\n        console.log(\"OPENAI_API_KEY available:\", !!process.env.OPENAI_API_KEY);\n        console.log(\"OPENAI_API_KEY length:\", process.env.OPENAI_API_KEY?.length || 0);\n        console.log(\"BLOB_READ_WRITE_TOKEN available:\", !!process.env.BLOB_READ_WRITE_TOKEN);\n        // Check if OpenAI API key is available\n        if (!process.env.OPENAI_API_KEY) {\n            console.error(\"OPENAI_API_KEY is not set\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"OpenAI API key is not configured\"\n            }, {\n                status: 500\n            });\n        }\n        const formData = await request.formData();\n        const figmaUrl = formData.get(\"figmaUrl\");\n        const prompt = formData.get(\"prompt\");\n        const imageFile = formData.get(\"image\");\n        console.log(\"Form data received:\", {\n            hasFigmaUrl: !!figmaUrl,\n            hasPrompt: !!prompt,\n            hasImage: !!imageFile,\n            promptLength: prompt?.length || 0\n        });\n        if (!prompt) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Prompt is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!figmaUrl && !imageFile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Either Figma URL or image file is required\"\n            }, {\n                status: 400\n            });\n        }\n        let imageContent = \"\";\n        if (imageFile) {\n            try {\n                // Convert the file to base64 directly without writing to disk\n                const bytes = await imageFile.arrayBuffer();\n                const buffer = Buffer.from(bytes);\n                imageContent = buffer.toString(\"base64\");\n                console.log(\"Image processed successfully, size:\", imageContent.length);\n            } catch (error) {\n                console.error(\"Error processing image:\", error);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: \"Error processing image file\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // Generate a unique ID for the results\n        const resultId = (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.generateResultId)();\n        console.log(\"Generated result ID:\", resultId);\n        // Store initial result with empty values\n        try {\n            await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                html: \"Processing...\",\n                sitecoreFields: \"Processing...\",\n                component: \"Processing...\"\n            });\n            console.log(\"Initial results stored\");\n        } catch (error) {\n            console.error(\"Error storing initial results:\", error);\n        // Continue processing even if initial storage fails\n        }\n        // Process the request synchronously instead of in the background\n        console.log(\"Starting synchronous processing for result ID:\", resultId);\n        // Generate HTML using OpenAI\n        let html = \"Processing...\";\n        let sitecoreFields = \"Processing...\";\n        let component = \"Processing...\";\n        try {\n            console.log(\"Calling OpenAI for HTML generation with prompt:\", prompt.substring(0, 100) + \"...\");\n            // Choose the appropriate model based on whether an image is provided\n            const model = imageContent ? \"gpt-4o\" : \"gpt-4\";\n            console.log(\"Using model:\", model);\n            let htmlCompletion;\n            if (imageContent) {\n                // Format for vision model\n                htmlCompletion = await openai.chat.completions.create({\n                    model: model,\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: [\n                                {\n                                    type: \"text\",\n                                    text: `Generate HTML for this design. ${prompt}${figmaUrl ? ` Figma URL: ${figmaUrl}` : \"\"}`\n                                },\n                                {\n                                    type: \"image_url\",\n                                    image_url: {\n                                        url: `data:image/jpeg;base64,${imageContent}`\n                                    }\n                                }\n                            ]\n                        }\n                    ],\n                    max_tokens: 2000\n                });\n            } else {\n                // Format for text-only model\n                htmlCompletion = await openai.chat.completions.create({\n                    model: model,\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: `Generate HTML for this design. ${prompt}${figmaUrl ? ` Figma URL: ${figmaUrl}` : \"\"}`\n                        }\n                    ],\n                    max_tokens: 2000\n                });\n            }\n            console.log(\"OpenAI HTML generation completed with response:\", htmlCompletion.choices[0].message.content?.substring(0, 100) + \"...\");\n            html = htmlCompletion.choices[0].message.content || \"Error: Failed to generate HTML\";\n            console.log(\"HTML generated, length:\", html.length);\n            // Update the stored results with HTML\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n                console.log(\"Updated results with HTML\");\n            } catch (error) {\n                console.error(\"Error updating results with HTML:\", error);\n            // Continue processing even if storage fails\n            }\n        } catch (error) {\n            console.error(\"Error generating HTML:\", error);\n            if (error instanceof Error) {\n                console.error(\"Error details:\", error.message, error.stack);\n            }\n            html = \"Error: Failed to generate HTML\";\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n            } catch (storageError) {\n                console.error(\"Error storing error result:\", storageError);\n            }\n        }\n        try {\n            console.log(\"Calling OpenAI for Sitecore fields generation\");\n            // Generate Sitecore fields\n            console.log(\"Sending request to OpenAI API for Sitecore fields generation\");\n            console.log(\"Using model: gpt-4\");\n            const sitecoreFieldsCompletion = await openai.chat.completions.create({\n                model: \"gpt-4\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: `Based on this HTML, generate Sitecore field definitions in JSON format. Include field types and descriptions. HTML: ${html}`\n                    }\n                ],\n                max_tokens: 2000\n            });\n            console.log(\"OpenAI Sitecore fields generation completed with response:\", sitecoreFieldsCompletion.choices[0].message.content?.substring(0, 100) + \"...\");\n            sitecoreFields = sitecoreFieldsCompletion.choices[0].message.content || \"Error: Failed to generate Sitecore fields\";\n            console.log(\"Sitecore fields generated, length:\", sitecoreFields.length);\n            // Update the stored results with Sitecore fields\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n                console.log(\"Updated results with Sitecore fields\");\n            } catch (error) {\n                console.error(\"Error updating results with Sitecore fields:\", error);\n            // Continue processing even if storage fails\n            }\n        } catch (error) {\n            console.error(\"Error generating Sitecore fields:\", error);\n            if (error instanceof Error) {\n                console.error(\"Error details:\", error.message, error.stack);\n            }\n            sitecoreFields = \"Error: Failed to generate Sitecore fields\";\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n            } catch (storageError) {\n                console.error(\"Error storing error result:\", storageError);\n            }\n        }\n        try {\n            console.log(\"Calling OpenAI for component generation\");\n            // Generate NextJS component\n            console.log(\"Sending request to OpenAI API for component generation\");\n            console.log(\"Using model: gpt-4\");\n            const componentCompletion = await openai.chat.completions.create({\n                model: \"gpt-4\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: `Generate a NextJS component with Sitecore integration based on this HTML and Sitecore fields. HTML: ${html}, Fields: ${sitecoreFields}`\n                    }\n                ],\n                max_tokens: 2000\n            });\n            console.log(\"OpenAI component generation completed with response:\", componentCompletion.choices[0].message.content?.substring(0, 100) + \"...\");\n            component = componentCompletion.choices[0].message.content || \"Error: Failed to generate component\";\n            console.log(\"Component generated, length:\", component.length);\n            // Update the stored results with the component\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n                console.log(\"Updated results with component\");\n            } catch (error) {\n                console.error(\"Error updating results with component:\", error);\n            // Continue processing even if storage fails\n            }\n        } catch (error) {\n            console.error(\"Error generating component:\", error);\n            if (error instanceof Error) {\n                console.error(\"Error details:\", error.message, error.stack);\n            }\n            component = \"Error: Failed to generate component\";\n            try {\n                await (0,_app_lib_storage__WEBPACK_IMPORTED_MODULE_1__.storeResults)(resultId, {\n                    html,\n                    sitecoreFields,\n                    component\n                });\n            } catch (storageError) {\n                console.error(\"Error storing error result:\", storageError);\n            }\n        }\n        console.log(\"Processing completed for result ID:\", resultId);\n        // Return the result ID and results\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            resultId,\n            results: {\n                html,\n                sitecoreFields,\n                component\n            }\n        });\n    } catch (error) {\n        console.error(\"Error in convert API:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", error.message, error.stack);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFJLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLElBQUlBLGlCQUFpQndDLE9BQU87WUFDMUI1QyxRQUFRSSxLQUFLLENBQUMsa0JBQWtCQSxNQUFNdUMsT0FBTyxFQUFFdkMsTUFBTXlDLEtBQUs7UUFDNUQ7UUFDQSxPQUFPeEQsa0ZBQVlBLENBQUNnQixJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0YsT0FBTztRQUF3QixHQUNqRDtZQUFFRyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpZ21hLXRvLXNpdGVjb3JlLWNvbnZlcnRlci8uL2FwcC9hcGkvY29udmVydC9yb3V0ZS50cz8zMGIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknXHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXHJcbmltcG9ydCB7IGdlbmVyYXRlUmVzdWx0SWQsIHN0b3JlUmVzdWx0cywgZ2V0UmVzdWx0cyB9IGZyb20gJ0AvYXBwL2xpYi9zdG9yYWdlJ1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBPcGVuQUkgY2xpZW50XHJcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xyXG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXHJcbn0pXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdDb252ZXJ0IEFQSSBjYWxsZWQnKVxyXG4gICAgY29uc29sZS5sb2coJ09QRU5BSV9BUElfS0VZIGF2YWlsYWJsZTonLCAhIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKVxyXG4gICAgY29uc29sZS5sb2coJ09QRU5BSV9BUElfS0VZIGxlbmd0aDonLCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWT8ubGVuZ3RoIHx8IDApXHJcbiAgICBjb25zb2xlLmxvZygnQkxPQl9SRUFEX1dSSVRFX1RPS0VOIGF2YWlsYWJsZTonLCAhIXByb2Nlc3MuZW52LkJMT0JfUkVBRF9XUklURV9UT0tFTilcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgT3BlbkFJIEFQSSBrZXkgaXMgYXZhaWxhYmxlXHJcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09QRU5BSV9BUElfS0VZIGlzIG5vdCBzZXQnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdPcGVuQUkgQVBJIGtleSBpcyBub3QgY29uZmlndXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxyXG4gICAgXHJcbiAgICBjb25zdCBmaWdtYVVybCA9IGZvcm1EYXRhLmdldCgnZmlnbWFVcmwnKSBhcyBzdHJpbmdcclxuICAgIGNvbnN0IHByb21wdCA9IGZvcm1EYXRhLmdldCgncHJvbXB0JykgYXMgc3RyaW5nXHJcbiAgICBjb25zdCBpbWFnZUZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ltYWdlJykgYXMgRmlsZSB8IG51bGxcclxuXHJcbiAgICBjb25zb2xlLmxvZygnRm9ybSBkYXRhIHJlY2VpdmVkOicsIHsgXHJcbiAgICAgIGhhc0ZpZ21hVXJsOiAhIWZpZ21hVXJsLCBcclxuICAgICAgaGFzUHJvbXB0OiAhIXByb21wdCwgXHJcbiAgICAgIGhhc0ltYWdlOiAhIWltYWdlRmlsZSxcclxuICAgICAgcHJvbXB0TGVuZ3RoOiBwcm9tcHQ/Lmxlbmd0aCB8fCAwXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcHJvbXB0KSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Byb21wdCBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghZmlnbWFVcmwgJiYgIWltYWdlRmlsZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFaXRoZXIgRmlnbWEgVVJMIG9yIGltYWdlIGZpbGUgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW1hZ2VDb250ZW50ID0gJydcclxuICAgIGlmIChpbWFnZUZpbGUpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRoZSBmaWxlIHRvIGJhc2U2NCBkaXJlY3RseSB3aXRob3V0IHdyaXRpbmcgdG8gZGlza1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgaW1hZ2VGaWxlLmFycmF5QnVmZmVyKClcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShieXRlcylcclxuICAgICAgICBpbWFnZUNvbnRlbnQgPSBidWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHksIHNpemU6JywgaW1hZ2VDb250ZW50Lmxlbmd0aClcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGltYWdlOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXJyb3IgcHJvY2Vzc2luZyBpbWFnZSBmaWxlJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoZSByZXN1bHRzXHJcbiAgICBjb25zdCByZXN1bHRJZCA9IGdlbmVyYXRlUmVzdWx0SWQoKVxyXG4gICAgY29uc29sZS5sb2coJ0dlbmVyYXRlZCByZXN1bHQgSUQ6JywgcmVzdWx0SWQpXHJcbiAgICBcclxuICAgIC8vIFN0b3JlIGluaXRpYWwgcmVzdWx0IHdpdGggZW1wdHkgdmFsdWVzXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBzdG9yZVJlc3VsdHMocmVzdWx0SWQsIHtcclxuICAgICAgICBodG1sOiAnUHJvY2Vzc2luZy4uLicsXHJcbiAgICAgICAgc2l0ZWNvcmVGaWVsZHM6ICdQcm9jZXNzaW5nLi4uJyxcclxuICAgICAgICBjb21wb25lbnQ6ICdQcm9jZXNzaW5nLi4uJ1xyXG4gICAgICB9KVxyXG4gICAgICBjb25zb2xlLmxvZygnSW5pdGlhbCByZXN1bHRzIHN0b3JlZCcpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdG9yaW5nIGluaXRpYWwgcmVzdWx0czonLCBlcnJvcilcclxuICAgICAgLy8gQ29udGludWUgcHJvY2Vzc2luZyBldmVuIGlmIGluaXRpYWwgc3RvcmFnZSBmYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByb2Nlc3MgdGhlIHJlcXVlc3Qgc3luY2hyb25vdXNseSBpbnN0ZWFkIG9mIGluIHRoZSBiYWNrZ3JvdW5kXHJcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgc3luY2hyb25vdXMgcHJvY2Vzc2luZyBmb3IgcmVzdWx0IElEOicsIHJlc3VsdElkKVxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSBIVE1MIHVzaW5nIE9wZW5BSVxyXG4gICAgbGV0IGh0bWwgPSAnUHJvY2Vzc2luZy4uLidcclxuICAgIGxldCBzaXRlY29yZUZpZWxkcyA9ICdQcm9jZXNzaW5nLi4uJ1xyXG4gICAgbGV0IGNvbXBvbmVudCA9ICdQcm9jZXNzaW5nLi4uJ1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FsbGluZyBPcGVuQUkgZm9yIEhUTUwgZ2VuZXJhdGlvbiB3aXRoIHByb21wdDonLCBwcm9tcHQuc3Vic3RyaW5nKDAsIDEwMCkgKyAnLi4uJylcclxuICAgICAgXHJcbiAgICAgIC8vIENob29zZSB0aGUgYXBwcm9wcmlhdGUgbW9kZWwgYmFzZWQgb24gd2hldGhlciBhbiBpbWFnZSBpcyBwcm92aWRlZFxyXG4gICAgICBjb25zdCBtb2RlbCA9IGltYWdlQ29udGVudCA/IFwiZ3B0LTRvXCIgOiBcImdwdC00XCJcclxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIG1vZGVsOicsIG1vZGVsKVxyXG4gICAgICBcclxuICAgICAgbGV0IGh0bWxDb21wbGV0aW9uO1xyXG4gICAgICBcclxuICAgICAgaWYgKGltYWdlQ29udGVudCkge1xyXG4gICAgICAgIC8vIEZvcm1hdCBmb3IgdmlzaW9uIG1vZGVsXHJcbiAgICAgICAgaHRtbENvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgbW9kZWw6IG1vZGVsLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLCBcclxuICAgICAgICAgICAgICAgICAgdGV4dDogYEdlbmVyYXRlIEhUTUwgZm9yIHRoaXMgZGVzaWduLiAke3Byb21wdH0ke2ZpZ21hVXJsID8gYCBGaWdtYSBVUkw6ICR7ZmlnbWFVcmx9YCA6ICcnfWAgXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIiwgXHJcbiAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogeyBcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7aW1hZ2VDb250ZW50fWAgXHJcbiAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBtYXhfdG9rZW5zOiAyMDAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZvcm1hdCBmb3IgdGV4dC1vbmx5IG1vZGVsXHJcbiAgICAgICAgaHRtbENvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgbW9kZWw6IG1vZGVsLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGBHZW5lcmF0ZSBIVE1MIGZvciB0aGlzIGRlc2lnbi4gJHtwcm9tcHR9JHtmaWdtYVVybCA/IGAgRmlnbWEgVVJMOiAke2ZpZ21hVXJsfWAgOiAnJ31gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIG1heF90b2tlbnM6IDIwMDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgSFRNTCBnZW5lcmF0aW9uIGNvbXBsZXRlZCB3aXRoIHJlc3BvbnNlOicsIGh0bWxDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50Py5zdWJzdHJpbmcoMCwgMTAwKSArICcuLi4nKVxyXG4gICAgICBcclxuICAgICAgaHRtbCA9IGh0bWxDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50IHx8ICdFcnJvcjogRmFpbGVkIHRvIGdlbmVyYXRlIEhUTUwnXHJcbiAgICAgIGNvbnNvbGUubG9nKCdIVE1MIGdlbmVyYXRlZCwgbGVuZ3RoOicsIGh0bWwubGVuZ3RoKVxyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIHRoZSBzdG9yZWQgcmVzdWx0cyB3aXRoIEhUTUxcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBzdG9yZVJlc3VsdHMocmVzdWx0SWQsIHtcclxuICAgICAgICAgIGh0bWwsXHJcbiAgICAgICAgICBzaXRlY29yZUZpZWxkcyxcclxuICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgcmVzdWx0cyB3aXRoIEhUTUwnKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlc3VsdHMgd2l0aCBIVE1MOicsIGVycm9yKVxyXG4gICAgICAgIC8vIENvbnRpbnVlIHByb2Nlc3NpbmcgZXZlbiBpZiBzdG9yYWdlIGZhaWxzXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgSFRNTDonLCBlcnJvcilcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKVxyXG4gICAgICB9XHJcbiAgICAgIGh0bWwgPSAnRXJyb3I6IEZhaWxlZCB0byBnZW5lcmF0ZSBIVE1MJ1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlUmVzdWx0cyhyZXN1bHRJZCwge1xyXG4gICAgICAgICAgaHRtbCxcclxuICAgICAgICAgIHNpdGVjb3JlRmllbGRzLFxyXG4gICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBjYXRjaCAoc3RvcmFnZUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RvcmluZyBlcnJvciByZXN1bHQ6Jywgc3RvcmFnZUVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsaW5nIE9wZW5BSSBmb3IgU2l0ZWNvcmUgZmllbGRzIGdlbmVyYXRpb24nKVxyXG4gICAgICAvLyBHZW5lcmF0ZSBTaXRlY29yZSBmaWVsZHNcclxuICAgICAgY29uc29sZS5sb2coJ1NlbmRpbmcgcmVxdWVzdCB0byBPcGVuQUkgQVBJIGZvciBTaXRlY29yZSBmaWVsZHMgZ2VuZXJhdGlvbicpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBtb2RlbDogZ3B0LTQnKVxyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2l0ZWNvcmVGaWVsZHNDb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcclxuICAgICAgICBtb2RlbDogXCJncHQtNFwiLCAvLyBVc2luZyBhIG1vcmUgY2FwYWJsZSBtb2RlbCBmb3Igc3RydWN0dXJlZCBvdXRwdXRcclxuICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcclxuICAgICAgICAgICAgY29udGVudDogYEJhc2VkIG9uIHRoaXMgSFRNTCwgZ2VuZXJhdGUgU2l0ZWNvcmUgZmllbGQgZGVmaW5pdGlvbnMgaW4gSlNPTiBmb3JtYXQuIEluY2x1ZGUgZmllbGQgdHlwZXMgYW5kIGRlc2NyaXB0aW9ucy4gSFRNTDogJHtodG1sfWAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgbWF4X3Rva2VuczogMjAwMCxcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgU2l0ZWNvcmUgZmllbGRzIGdlbmVyYXRpb24gY29tcGxldGVkIHdpdGggcmVzcG9uc2U6Jywgc2l0ZWNvcmVGaWVsZHNDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50Py5zdWJzdHJpbmcoMCwgMTAwKSArICcuLi4nKVxyXG4gICAgICBcclxuICAgICAgc2l0ZWNvcmVGaWVsZHMgPSBzaXRlY29yZUZpZWxkc0NvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgfHwgJ0Vycm9yOiBGYWlsZWQgdG8gZ2VuZXJhdGUgU2l0ZWNvcmUgZmllbGRzJ1xyXG4gICAgICBjb25zb2xlLmxvZygnU2l0ZWNvcmUgZmllbGRzIGdlbmVyYXRlZCwgbGVuZ3RoOicsIHNpdGVjb3JlRmllbGRzLmxlbmd0aClcclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgc3RvcmVkIHJlc3VsdHMgd2l0aCBTaXRlY29yZSBmaWVsZHNcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBzdG9yZVJlc3VsdHMocmVzdWx0SWQsIHtcclxuICAgICAgICAgIGh0bWwsXHJcbiAgICAgICAgICBzaXRlY29yZUZpZWxkcyxcclxuICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgcmVzdWx0cyB3aXRoIFNpdGVjb3JlIGZpZWxkcycpXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcmVzdWx0cyB3aXRoIFNpdGVjb3JlIGZpZWxkczonLCBlcnJvcilcclxuICAgICAgICAvLyBDb250aW51ZSBwcm9jZXNzaW5nIGV2ZW4gaWYgc3RvcmFnZSBmYWlsc1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIFNpdGVjb3JlIGZpZWxkczonLCBlcnJvcilcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKVxyXG4gICAgICB9XHJcbiAgICAgIHNpdGVjb3JlRmllbGRzID0gJ0Vycm9yOiBGYWlsZWQgdG8gZ2VuZXJhdGUgU2l0ZWNvcmUgZmllbGRzJ1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlUmVzdWx0cyhyZXN1bHRJZCwge1xyXG4gICAgICAgICAgaHRtbCxcclxuICAgICAgICAgIHNpdGVjb3JlRmllbGRzLFxyXG4gICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBjYXRjaCAoc3RvcmFnZUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RvcmluZyBlcnJvciByZXN1bHQ6Jywgc3RvcmFnZUVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsaW5nIE9wZW5BSSBmb3IgY29tcG9uZW50IGdlbmVyYXRpb24nKVxyXG4gICAgICAvLyBHZW5lcmF0ZSBOZXh0SlMgY29tcG9uZW50XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIHJlcXVlc3QgdG8gT3BlbkFJIEFQSSBmb3IgY29tcG9uZW50IGdlbmVyYXRpb24nKVxyXG4gICAgICBjb25zb2xlLmxvZygnVXNpbmcgbW9kZWw6IGdwdC00JylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNvbXBvbmVudENvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgIG1vZGVsOiBcImdwdC00XCIsIC8vIFVzaW5nIGEgbW9yZSBjYXBhYmxlIG1vZGVsIGZvciBjb2RlIGdlbmVyYXRpb25cclxuICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcclxuICAgICAgICAgICAgY29udGVudDogYEdlbmVyYXRlIGEgTmV4dEpTIGNvbXBvbmVudCB3aXRoIFNpdGVjb3JlIGludGVncmF0aW9uIGJhc2VkIG9uIHRoaXMgSFRNTCBhbmQgU2l0ZWNvcmUgZmllbGRzLiBIVE1MOiAke2h0bWx9LCBGaWVsZHM6ICR7c2l0ZWNvcmVGaWVsZHN9YCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBtYXhfdG9rZW5zOiAyMDAwLFxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ09wZW5BSSBjb21wb25lbnQgZ2VuZXJhdGlvbiBjb21wbGV0ZWQgd2l0aCByZXNwb25zZTonLCBjb21wb25lbnRDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50Py5zdWJzdHJpbmcoMCwgMTAwKSArICcuLi4nKVxyXG4gICAgICBcclxuICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50Q29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCAnRXJyb3I6IEZhaWxlZCB0byBnZW5lcmF0ZSBjb21wb25lbnQnXHJcbiAgICAgIGNvbnNvbGUubG9nKCdDb21wb25lbnQgZ2VuZXJhdGVkLCBsZW5ndGg6JywgY29tcG9uZW50Lmxlbmd0aClcclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgc3RvcmVkIHJlc3VsdHMgd2l0aCB0aGUgY29tcG9uZW50XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmVSZXN1bHRzKHJlc3VsdElkLCB7XHJcbiAgICAgICAgICBodG1sLFxyXG4gICAgICAgICAgc2l0ZWNvcmVGaWVsZHMsXHJcbiAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIHJlc3VsdHMgd2l0aCBjb21wb25lbnQnKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlc3VsdHMgd2l0aCBjb21wb25lbnQ6JywgZXJyb3IpXHJcbiAgICAgICAgLy8gQ29udGludWUgcHJvY2Vzc2luZyBldmVuIGlmIHN0b3JhZ2UgZmFpbHNcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBjb21wb25lbnQ6JywgZXJyb3IpXHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjaylcclxuICAgICAgfVxyXG4gICAgICBjb21wb25lbnQgPSAnRXJyb3I6IEZhaWxlZCB0byBnZW5lcmF0ZSBjb21wb25lbnQnXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmVSZXN1bHRzKHJlc3VsdElkLCB7XHJcbiAgICAgICAgICBodG1sLFxyXG4gICAgICAgICAgc2l0ZWNvcmVGaWVsZHMsXHJcbiAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICB9KVxyXG4gICAgICB9IGNhdGNoIChzdG9yYWdlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdG9yaW5nIGVycm9yIHJlc3VsdDonLCBzdG9yYWdlRXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgY29tcGxldGVkIGZvciByZXN1bHQgSUQ6JywgcmVzdWx0SWQpXHJcbiAgICBcclxuICAgIC8vIFJldHVybiB0aGUgcmVzdWx0IElEIGFuZCByZXN1bHRzXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICByZXN1bHRJZCxcclxuICAgICAgcmVzdWx0czoge1xyXG4gICAgICAgIGh0bWwsXHJcbiAgICAgICAgc2l0ZWNvcmVGaWVsZHMsXHJcbiAgICAgICAgY29tcG9uZW50XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNvbnZlcnQgQVBJOicsIGVycm9yKVxyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjaylcclxuICAgIH1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiT3BlbkFJIiwiZ2VuZXJhdGVSZXN1bHRJZCIsInN0b3JlUmVzdWx0cyIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsIkJMT0JfUkVBRF9XUklURV9UT0tFTiIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJmb3JtRGF0YSIsImZpZ21hVXJsIiwiZ2V0IiwicHJvbXB0IiwiaW1hZ2VGaWxlIiwiaGFzRmlnbWFVcmwiLCJoYXNQcm9tcHQiLCJoYXNJbWFnZSIsInByb21wdExlbmd0aCIsImltYWdlQ29udGVudCIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJyZXN1bHRJZCIsImh0bWwiLCJzaXRlY29yZUZpZWxkcyIsImNvbXBvbmVudCIsInN1YnN0cmluZyIsIm1vZGVsIiwiaHRtbENvbXBsZXRpb24iLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsInRleHQiLCJpbWFnZV91cmwiLCJ1cmwiLCJtYXhfdG9rZW5zIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsInN0YWNrIiwic3RvcmFnZUVycm9yIiwic2l0ZWNvcmVGaWVsZHNDb21wbGV0aW9uIiwiY29tcG9uZW50Q29tcGxldGlvbiIsInJlc3VsdHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/convert/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/storage.ts":
/*!****************************!*\
  !*** ./app/lib/storage.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanupOldResults: () => (/* binding */ cleanupOldResults),\n/* harmony export */   generateResultId: () => (/* binding */ generateResultId),\n/* harmony export */   getResults: () => (/* binding */ getResults),\n/* harmony export */   listResults: () => (/* binding */ listResults),\n/* harmony export */   storeResults: () => (/* binding */ storeResults)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var _vercel_blob__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vercel/blob */ \"(rsc)/./node_modules/@vercel/blob/dist/index.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n// Generate a unique ID for each result set\nfunction generateResultId() {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    console.log(\"Generated result ID:\", id);\n    return id;\n}\n// Store results with the given ID\nasync function storeResults(id, results) {\n    try {\n        console.log(\"Storing results for ID:\", id);\n        console.log(\"Results to store:\", {\n            htmlLength: results.html.length,\n            sitecoreFieldsLength: results.sitecoreFields.length,\n            componentLength: results.component.length\n        });\n        const data = {\n            ...results,\n            timestamp: Date.now()\n        };\n        // Check if BLOB_READ_WRITE_TOKEN is available\n        const hasBlobToken = !!process.env.BLOB_READ_WRITE_TOKEN;\n        console.log(\"BLOB_READ_WRITE_TOKEN available:\", hasBlobToken);\n        if (hasBlobToken) {\n            // Store the results in Vercel Blob\n            console.log(\"Storing data in Vercel Blob\");\n            const blob = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.put)(`results/${id}.json`, JSON.stringify(data), {\n                access: \"public\",\n                addRandomSuffix: false\n            });\n            console.log(`Stored results with ID: ${id} at URL: ${blob.url}`);\n        } else {\n            // Use local file storage for development\n            console.log(\"Using local file storage for development\");\n            // Ensure the storage directory exists\n            const storageDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"storage\");\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(storageDir)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(storageDir, {\n                    recursive: true\n                });\n            }\n            // Write the results to a file\n            const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(storageDir, `${id}.json`);\n            fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(filePath, JSON.stringify(data));\n            console.log(`Stored results with ID: ${id} at local path: ${filePath}`);\n        }\n    } catch (error) {\n        console.error(\"Error storing results:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", error.message, error.stack);\n        }\n        throw error // Propagate the error to handle it in the API route\n        ;\n    }\n}\n// Get results by ID\nasync function getResults(id) {\n    try {\n        console.log(\"Getting results for ID:\", id);\n        // Check if BLOB_READ_WRITE_TOKEN is available\n        const hasBlobToken = !!process.env.BLOB_READ_WRITE_TOKEN;\n        console.log(\"BLOB_READ_WRITE_TOKEN available:\", hasBlobToken);\n        if (hasBlobToken) {\n            // Get the results from Vercel Blob\n            console.log(\"Listing blobs with prefix:\", `results/${id}.json`);\n            const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.list)({\n                prefix: `results/${id}.json`\n            });\n            console.log(\"Blobs found:\", blobs.length);\n            if (!blobs || blobs.length === 0) {\n                console.log(\"No blobs found for ID:\", id);\n                return null;\n            }\n            console.log(\"Fetching blob from URL:\", blobs[0].url);\n            const response = await fetch(blobs[0].url);\n            if (!response.ok) {\n                console.error(\"Error fetching blob:\", response.status, response.statusText);\n                return null;\n            }\n            const result = await response.json();\n            // Check if the result has expired (older than 1 hour)\n            const oneHourAgo = Date.now() - 60 * 60 * 1000;\n            if (result.timestamp < oneHourAgo) {\n                console.log(\"Result expired, deleting blob\");\n                await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.del)(blobs[0].url);\n                return null;\n            }\n            console.log(\"Result retrieved successfully:\", {\n                htmlLength: result.html.length,\n                sitecoreFieldsLength: result.sitecoreFields.length,\n                componentLength: result.component.length,\n                timestamp: new Date(result.timestamp).toISOString()\n            });\n            return result;\n        } else {\n            // Use local file storage for development\n            console.log(\"Using local file storage for development\");\n            const storageDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"storage\");\n            const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(storageDir, `${id}.json`);\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n                console.log(\"No file found for ID:\", id);\n                return null;\n            }\n            const fileContent = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath, \"utf-8\");\n            const result = JSON.parse(fileContent);\n            // Check if the result has expired (older than 1 hour)\n            const oneHourAgo = Date.now() - 60 * 60 * 1000;\n            if (result.timestamp < oneHourAgo) {\n                console.log(\"Result expired, deleting file\");\n                fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(filePath);\n                return null;\n            }\n            console.log(\"Result retrieved successfully:\", {\n                htmlLength: result.html.length,\n                sitecoreFieldsLength: result.sitecoreFields.length,\n                componentLength: result.component.length,\n                timestamp: new Date(result.timestamp).toISOString()\n            });\n            return result;\n        }\n    } catch (error) {\n        console.error(\"Error retrieving results:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", error.message, error.stack);\n        }\n        return null;\n    }\n}\n// Clean up old results (older than 1 hour)\nasync function cleanupOldResults() {\n    try {\n        console.log(\"Starting cleanup of old results\");\n        const oneHourAgo = Date.now() - 60 * 60 * 1000;\n        // Check if BLOB_READ_WRITE_TOKEN is available\n        console.log(\"BLOB_READ_WRITE_TOKEN available:\", !!process.env.BLOB_READ_WRITE_TOKEN);\n        // List all results\n        console.log(\"Listing all blobs with prefix: results/\");\n        const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.list)({\n            prefix: \"results/\"\n        });\n        console.log(\"Total blobs found:\", blobs.length);\n        // Delete expired results\n        let deletedCount = 0;\n        for (const blob of blobs){\n            try {\n                console.log(\"Fetching blob from URL:\", blob.url);\n                const response = await fetch(blob.url);\n                if (!response.ok) {\n                    console.error(\"Error fetching blob:\", response.status, response.statusText);\n                    continue;\n                }\n                const result = await response.json();\n                if (result.timestamp < oneHourAgo) {\n                    console.log(\"Deleting expired blob:\", blob.url);\n                    await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.del)(blob.url);\n                    deletedCount++;\n                }\n            } catch (error) {\n                console.error(\"Error processing blob during cleanup:\", error);\n                if (error instanceof Error) {\n                    console.error(\"Error details:\", error.message, error.stack);\n                }\n            }\n        }\n        console.log(`Cleanup completed. Deleted ${deletedCount} expired results.`);\n    } catch (error) {\n        console.error(\"Error cleaning up results:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", error.message, error.stack);\n        }\n    }\n}\n// Run cleanup on startup\ncleanupOldResults();\n// List all results\nasync function listResults() {\n    try {\n        console.log(\"Listing all results\");\n        // Check if BLOB_READ_WRITE_TOKEN is available\n        const hasBlobToken = !!process.env.BLOB_READ_WRITE_TOKEN;\n        console.log(\"BLOB_READ_WRITE_TOKEN available:\", hasBlobToken);\n        if (hasBlobToken) {\n            // Get the results from Vercel Blob\n            console.log(\"Listing blobs with prefix:\", \"results/\");\n            const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_3__.list)({\n                prefix: \"results/\"\n            });\n            console.log(\"Blobs found:\", blobs.length);\n            if (!blobs || blobs.length === 0) {\n                console.log(\"No blobs found\");\n                return [];\n            }\n            // Extract IDs from blob URLs\n            const results = blobs.map((blob)=>{\n                const id = blob.url.split(\"/\").pop()?.replace(\".json\", \"\") || \"\";\n                return {\n                    id,\n                    timestamp: blob.uploadedAt.getTime()\n                };\n            });\n            console.log(\"Results retrieved successfully:\", results.length);\n            return results;\n        } else {\n            // Use local file storage for development\n            console.log(\"Using local file storage for development\");\n            const storageDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"storage\");\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(storageDir)) {\n                console.log(\"Storage directory not found\");\n                return [];\n            }\n            const files = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(storageDir);\n            console.log(\"Files found:\", files.length);\n            // Extract IDs from filenames\n            const results = files.filter((file)=>file.endsWith(\".json\")).map((file)=>{\n                const id = file.replace(\".json\", \"\");\n                const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(storageDir, file);\n                const stats = fs__WEBPACK_IMPORTED_MODULE_0___default().statSync(filePath);\n                return {\n                    id,\n                    timestamp: stats.mtimeMs\n                };\n            });\n            console.log(\"Results retrieved successfully:\", results.length);\n            return results;\n        }\n    } catch (error) {\n        console.error(\"Error listing results:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", error.message, error.stack);\n        }\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFBYSxDQUFDNkIsYUFBYTtnQkFDOUJ6QixRQUFRQyxHQUFHLENBQUM7Z0JBQ1osT0FBTyxFQUFFO1lBQ1g7WUFFQSxNQUFNNkQsUUFBUWxFLHFEQUFjLENBQUM2QjtZQUM3QnpCLFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0I2RCxNQUFNeEQsTUFBTTtZQUV4Qyw2QkFBNkI7WUFDN0IsTUFBTUgsVUFBVTJELE1BQ2JFLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS0MsUUFBUSxDQUFDLFVBQzdCVixHQUFHLENBQUNTLENBQUFBO2dCQUNILE1BQU1sRSxLQUFLa0UsS0FBS04sT0FBTyxDQUFDLFNBQVM7Z0JBQ2pDLE1BQU01QixXQUFXbEMsZ0RBQVMsQ0FBQzRCLFlBQVl3QztnQkFDdkMsTUFBTUUsUUFBUXZFLGtEQUFXLENBQUNtQztnQkFDMUIsT0FBTztvQkFBRWhDO29CQUFJYSxXQUFXdUQsTUFBTUUsT0FBTztnQkFBQztZQUN4QztZQUVGckUsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ0UsUUFBUUcsTUFBTTtZQUU3RCxPQUFPSDtRQUNUO0lBQ0YsRUFBRSxPQUFPOEIsT0FBTztRQUNkakMsUUFBUWlDLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLElBQUlBLGlCQUFpQkMsT0FBTztZQUMxQmxDLFFBQVFpQyxLQUFLLENBQUMsa0JBQWtCQSxNQUFNRSxPQUFPLEVBQUVGLE1BQU1HLEtBQUs7UUFDNUQ7UUFDQSxPQUFPLEVBQUU7SUFDWDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlnbWEtdG8tc2l0ZWNvcmUtY29udmVydGVyLy4vYXBwL2xpYi9zdG9yYWdlLnRzP2UyZjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCdcclxuaW1wb3J0IHsgcHV0LCBsaXN0LCBkZWwgfSBmcm9tICdAdmVyY2VsL2Jsb2InXHJcbmltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuXHJcbi8vIERlZmluZSB0aGUgc3RydWN0dXJlIG9mIGEgZ2VuZXJhdGVkIHJlc3VsdFxyXG5pbnRlcmZhY2UgR2VuZXJhdGVkUmVzdWx0IHtcclxuICBodG1sOiBzdHJpbmc7XHJcbiAgc2l0ZWNvcmVGaWVsZHM6IHN0cmluZztcclxuICBjb21wb25lbnQ6IHN0cmluZztcclxuICB0aW1lc3RhbXA6IG51bWJlcjtcclxufVxyXG5cclxuLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIGVhY2ggcmVzdWx0IHNldFxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZXN1bHRJZCgpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGlkID0gdXVpZHY0KClcclxuICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHJlc3VsdCBJRDonLCBpZClcclxuICByZXR1cm4gaWRcclxufVxyXG5cclxuLy8gU3RvcmUgcmVzdWx0cyB3aXRoIHRoZSBnaXZlbiBJRFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmVSZXN1bHRzKGlkOiBzdHJpbmcsIHJlc3VsdHM6IE9taXQ8R2VuZXJhdGVkUmVzdWx0LCAndGltZXN0YW1wJz4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0b3JpbmcgcmVzdWx0cyBmb3IgSUQ6JywgaWQpXHJcbiAgICBjb25zb2xlLmxvZygnUmVzdWx0cyB0byBzdG9yZTonLCB7XHJcbiAgICAgIGh0bWxMZW5ndGg6IHJlc3VsdHMuaHRtbC5sZW5ndGgsXHJcbiAgICAgIHNpdGVjb3JlRmllbGRzTGVuZ3RoOiByZXN1bHRzLnNpdGVjb3JlRmllbGRzLmxlbmd0aCxcclxuICAgICAgY29tcG9uZW50TGVuZ3RoOiByZXN1bHRzLmNvbXBvbmVudC5sZW5ndGhcclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIC4uLnJlc3VsdHMsXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBCTE9CX1JFQURfV1JJVEVfVE9LRU4gaXMgYXZhaWxhYmxlXHJcbiAgICBjb25zdCBoYXNCbG9iVG9rZW4gPSAhIXByb2Nlc3MuZW52LkJMT0JfUkVBRF9XUklURV9UT0tFTlxyXG4gICAgY29uc29sZS5sb2coJ0JMT0JfUkVBRF9XUklURV9UT0tFTiBhdmFpbGFibGU6JywgaGFzQmxvYlRva2VuKVxyXG4gICAgXHJcbiAgICBpZiAoaGFzQmxvYlRva2VuKSB7XHJcbiAgICAgIC8vIFN0b3JlIHRoZSByZXN1bHRzIGluIFZlcmNlbCBCbG9iXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdG9yaW5nIGRhdGEgaW4gVmVyY2VsIEJsb2InKVxyXG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcHV0KGByZXN1bHRzLyR7aWR9Lmpzb25gLCBKU09OLnN0cmluZ2lmeShkYXRhKSwge1xyXG4gICAgICAgIGFjY2VzczogJ3B1YmxpYycsXHJcbiAgICAgICAgYWRkUmFuZG9tU3VmZml4OiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFN0b3JlZCByZXN1bHRzIHdpdGggSUQ6ICR7aWR9IGF0IFVSTDogJHtibG9iLnVybH1gKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVXNlIGxvY2FsIGZpbGUgc3RvcmFnZSBmb3IgZGV2ZWxvcG1lbnRcclxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGxvY2FsIGZpbGUgc3RvcmFnZSBmb3IgZGV2ZWxvcG1lbnQnKVxyXG4gICAgICBcclxuICAgICAgLy8gRW5zdXJlIHRoZSBzdG9yYWdlIGRpcmVjdG9yeSBleGlzdHNcclxuICAgICAgY29uc3Qgc3RvcmFnZURpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc3RvcmFnZScpXHJcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyhzdG9yYWdlRGlyKSkge1xyXG4gICAgICAgIGZzLm1rZGlyU3luYyhzdG9yYWdlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBXcml0ZSB0aGUgcmVzdWx0cyB0byBhIGZpbGVcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oc3RvcmFnZURpciwgYCR7aWR9Lmpzb25gKVxyXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBTdG9yZWQgcmVzdWx0cyB3aXRoIElEOiAke2lkfSBhdCBsb2NhbCBwYXRoOiAke2ZpbGVQYXRofWApXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0b3JpbmcgcmVzdWx0czonLCBlcnJvcilcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6JywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spXHJcbiAgICB9XHJcbiAgICB0aHJvdyBlcnJvciAvLyBQcm9wYWdhdGUgdGhlIGVycm9yIHRvIGhhbmRsZSBpdCBpbiB0aGUgQVBJIHJvdXRlXHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgcmVzdWx0cyBieSBJRFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVzdWx0cyhpZDogc3RyaW5nKTogUHJvbWlzZTxHZW5lcmF0ZWRSZXN1bHQgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIHJlc3VsdHMgZm9yIElEOicsIGlkKVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBCTE9CX1JFQURfV1JJVEVfVE9LRU4gaXMgYXZhaWxhYmxlXHJcbiAgICBjb25zdCBoYXNCbG9iVG9rZW4gPSAhIXByb2Nlc3MuZW52LkJMT0JfUkVBRF9XUklURV9UT0tFTlxyXG4gICAgY29uc29sZS5sb2coJ0JMT0JfUkVBRF9XUklURV9UT0tFTiBhdmFpbGFibGU6JywgaGFzQmxvYlRva2VuKVxyXG4gICAgXHJcbiAgICBpZiAoaGFzQmxvYlRva2VuKSB7XHJcbiAgICAgIC8vIEdldCB0aGUgcmVzdWx0cyBmcm9tIFZlcmNlbCBCbG9iXHJcbiAgICAgIGNvbnNvbGUubG9nKCdMaXN0aW5nIGJsb2JzIHdpdGggcHJlZml4OicsIGByZXN1bHRzLyR7aWR9Lmpzb25gKVxyXG4gICAgICBjb25zdCB7IGJsb2JzIH0gPSBhd2FpdCBsaXN0KHsgcHJlZml4OiBgcmVzdWx0cy8ke2lkfS5qc29uYCB9KVxyXG4gICAgICBjb25zb2xlLmxvZygnQmxvYnMgZm91bmQ6JywgYmxvYnMubGVuZ3RoKVxyXG4gICAgICBcclxuICAgICAgaWYgKCFibG9icyB8fCBibG9icy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gYmxvYnMgZm91bmQgZm9yIElEOicsIGlkKVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBibG9iIGZyb20gVVJMOicsIGJsb2JzWzBdLnVybClcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChibG9ic1swXS51cmwpXHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYmxvYjonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpXHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIEdlbmVyYXRlZFJlc3VsdFxyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJlc3VsdCBoYXMgZXhwaXJlZCAob2xkZXIgdGhhbiAxIGhvdXIpXHJcbiAgICAgIGNvbnN0IG9uZUhvdXJBZ28gPSBEYXRlLm5vdygpIC0gNjAgKiA2MCAqIDEwMDBcclxuICAgICAgaWYgKHJlc3VsdC50aW1lc3RhbXAgPCBvbmVIb3VyQWdvKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3VsdCBleHBpcmVkLCBkZWxldGluZyBibG9iJylcclxuICAgICAgICBhd2FpdCBkZWwoYmxvYnNbMF0udXJsKVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZXN1bHQgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseTonLCB7XHJcbiAgICAgICAgaHRtbExlbmd0aDogcmVzdWx0Lmh0bWwubGVuZ3RoLFxyXG4gICAgICAgIHNpdGVjb3JlRmllbGRzTGVuZ3RoOiByZXN1bHQuc2l0ZWNvcmVGaWVsZHMubGVuZ3RoLFxyXG4gICAgICAgIGNvbXBvbmVudExlbmd0aDogcmVzdWx0LmNvbXBvbmVudC5sZW5ndGgsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShyZXN1bHQudGltZXN0YW1wKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBVc2UgbG9jYWwgZmlsZSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudFxyXG4gICAgICBjb25zb2xlLmxvZygnVXNpbmcgbG9jYWwgZmlsZSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudCcpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdG9yYWdlRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzdG9yYWdlJylcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oc3RvcmFnZURpciwgYCR7aWR9Lmpzb25gKVxyXG4gICAgICBcclxuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBmaWxlIGZvdW5kIGZvciBJRDonLCBpZClcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBmaWxlQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0Zi04JylcclxuICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShmaWxlQ29udGVudCkgYXMgR2VuZXJhdGVkUmVzdWx0XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgcmVzdWx0IGhhcyBleHBpcmVkIChvbGRlciB0aGFuIDEgaG91cilcclxuICAgICAgY29uc3Qgb25lSG91ckFnbyA9IERhdGUubm93KCkgLSA2MCAqIDYwICogMTAwMFxyXG4gICAgICBpZiAocmVzdWx0LnRpbWVzdGFtcCA8IG9uZUhvdXJBZ28pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVzdWx0IGV4cGlyZWQsIGRlbGV0aW5nIGZpbGUnKVxyXG4gICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpXHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1Jlc3VsdCByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgICBodG1sTGVuZ3RoOiByZXN1bHQuaHRtbC5sZW5ndGgsXHJcbiAgICAgICAgc2l0ZWNvcmVGaWVsZHNMZW5ndGg6IHJlc3VsdC5zaXRlY29yZUZpZWxkcy5sZW5ndGgsXHJcbiAgICAgICAgY29tcG9uZW50TGVuZ3RoOiByZXN1bHQuY29tcG9uZW50Lmxlbmd0aCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKHJlc3VsdC50aW1lc3RhbXApLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV0cmlldmluZyByZXN1bHRzOicsIGVycm9yKVxyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjaylcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vLyBDbGVhbiB1cCBvbGQgcmVzdWx0cyAob2xkZXIgdGhhbiAxIGhvdXIpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwT2xkUmVzdWx0cygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGNsZWFudXAgb2Ygb2xkIHJlc3VsdHMnKVxyXG4gICAgY29uc3Qgb25lSG91ckFnbyA9IERhdGUubm93KCkgLSA2MCAqIDYwICogMTAwMFxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBCTE9CX1JFQURfV1JJVEVfVE9LRU4gaXMgYXZhaWxhYmxlXHJcbiAgICBjb25zb2xlLmxvZygnQkxPQl9SRUFEX1dSSVRFX1RPS0VOIGF2YWlsYWJsZTonLCAhIXByb2Nlc3MuZW52LkJMT0JfUkVBRF9XUklURV9UT0tFTilcclxuICAgIFxyXG4gICAgLy8gTGlzdCBhbGwgcmVzdWx0c1xyXG4gICAgY29uc29sZS5sb2coJ0xpc3RpbmcgYWxsIGJsb2JzIHdpdGggcHJlZml4OiByZXN1bHRzLycpXHJcbiAgICBjb25zdCB7IGJsb2JzIH0gPSBhd2FpdCBsaXN0KHsgcHJlZml4OiAncmVzdWx0cy8nIH0pXHJcbiAgICBjb25zb2xlLmxvZygnVG90YWwgYmxvYnMgZm91bmQ6JywgYmxvYnMubGVuZ3RoKVxyXG4gICAgXHJcbiAgICAvLyBEZWxldGUgZXhwaXJlZCByZXN1bHRzXHJcbiAgICBsZXQgZGVsZXRlZENvdW50ID0gMFxyXG4gICAgZm9yIChjb25zdCBibG9iIG9mIGJsb2JzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGJsb2IgZnJvbSBVUkw6JywgYmxvYi51cmwpXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChibG9iLnVybClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBibG9iOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dClcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBHZW5lcmF0ZWRSZXN1bHRcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzdWx0LnRpbWVzdGFtcCA8IG9uZUhvdXJBZ28pIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWxldGluZyBleHBpcmVkIGJsb2I6JywgYmxvYi51cmwpXHJcbiAgICAgICAgICBhd2FpdCBkZWwoYmxvYi51cmwpXHJcbiAgICAgICAgICBkZWxldGVkQ291bnQrK1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGJsb2IgZHVyaW5nIGNsZWFudXA6JywgZXJyb3IpXHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6JywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBDbGVhbnVwIGNvbXBsZXRlZC4gRGVsZXRlZCAke2RlbGV0ZWRDb3VudH0gZXhwaXJlZCByZXN1bHRzLmApXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFuaW5nIHVwIHJlc3VsdHM6JywgZXJyb3IpXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gUnVuIGNsZWFudXAgb24gc3RhcnR1cFxyXG5jbGVhbnVwT2xkUmVzdWx0cygpXHJcblxyXG4vLyBMaXN0IGFsbCByZXN1bHRzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0UmVzdWx0cygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZzsgdGltZXN0YW1wOiBudW1iZXIgfVtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdMaXN0aW5nIGFsbCByZXN1bHRzJylcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgQkxPQl9SRUFEX1dSSVRFX1RPS0VOIGlzIGF2YWlsYWJsZVxyXG4gICAgY29uc3QgaGFzQmxvYlRva2VuID0gISFwcm9jZXNzLmVudi5CTE9CX1JFQURfV1JJVEVfVE9LRU5cclxuICAgIGNvbnNvbGUubG9nKCdCTE9CX1JFQURfV1JJVEVfVE9LRU4gYXZhaWxhYmxlOicsIGhhc0Jsb2JUb2tlbilcclxuICAgIFxyXG4gICAgaWYgKGhhc0Jsb2JUb2tlbikge1xyXG4gICAgICAvLyBHZXQgdGhlIHJlc3VsdHMgZnJvbSBWZXJjZWwgQmxvYlxyXG4gICAgICBjb25zb2xlLmxvZygnTGlzdGluZyBibG9icyB3aXRoIHByZWZpeDonLCAncmVzdWx0cy8nKVxyXG4gICAgICBjb25zdCB7IGJsb2JzIH0gPSBhd2FpdCBsaXN0KHsgcHJlZml4OiAncmVzdWx0cy8nIH0pXHJcbiAgICAgIGNvbnNvbGUubG9nKCdCbG9icyBmb3VuZDonLCBibG9icy5sZW5ndGgpXHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWJsb2JzIHx8IGJsb2JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBibG9icyBmb3VuZCcpXHJcbiAgICAgICAgcmV0dXJuIFtdXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEV4dHJhY3QgSURzIGZyb20gYmxvYiBVUkxzXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBibG9icy5tYXAoYmxvYiA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBibG9iLnVybC5zcGxpdCgnLycpLnBvcCgpPy5yZXBsYWNlKCcuanNvbicsICcnKSB8fCAnJ1xyXG4gICAgICAgIHJldHVybiB7IGlkLCB0aW1lc3RhbXA6IGJsb2IudXBsb2FkZWRBdC5nZXRUaW1lKCkgfVxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1Jlc3VsdHMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseTonLCByZXN1bHRzLmxlbmd0aClcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXN1bHRzXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBVc2UgbG9jYWwgZmlsZSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudFxyXG4gICAgICBjb25zb2xlLmxvZygnVXNpbmcgbG9jYWwgZmlsZSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudCcpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdG9yYWdlRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzdG9yYWdlJylcclxuICAgICAgXHJcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyhzdG9yYWdlRGlyKSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdG9yYWdlIGRpcmVjdG9yeSBub3QgZm91bmQnKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKHN0b3JhZ2VEaXIpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaWxlcyBmb3VuZDonLCBmaWxlcy5sZW5ndGgpXHJcbiAgICAgIFxyXG4gICAgICAvLyBFeHRyYWN0IElEcyBmcm9tIGZpbGVuYW1lc1xyXG4gICAgICBjb25zdCByZXN1bHRzID0gZmlsZXNcclxuICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5lbmRzV2l0aCgnLmpzb24nKSlcclxuICAgICAgICAubWFwKGZpbGUgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaWQgPSBmaWxlLnJlcGxhY2UoJy5qc29uJywgJycpXHJcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihzdG9yYWdlRGlyLCBmaWxlKVxyXG4gICAgICAgICAgY29uc3Qgc3RhdHMgPSBmcy5zdGF0U3luYyhmaWxlUGF0aClcclxuICAgICAgICAgIHJldHVybiB7IGlkLCB0aW1lc3RhbXA6IHN0YXRzLm10aW1lTXMgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnUmVzdWx0cyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5OicsIHJlc3VsdHMubGVuZ3RoKVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlc3VsdHNcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlzdGluZyByZXN1bHRzOicsIGVycm9yKVxyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjaylcclxuICAgIH1cclxuICAgIHJldHVybiBbXVxyXG4gIH1cclxufSAiXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJwdXQiLCJsaXN0IiwiZGVsIiwiZnMiLCJwYXRoIiwiZ2VuZXJhdGVSZXN1bHRJZCIsImlkIiwiY29uc29sZSIsImxvZyIsInN0b3JlUmVzdWx0cyIsInJlc3VsdHMiLCJodG1sTGVuZ3RoIiwiaHRtbCIsImxlbmd0aCIsInNpdGVjb3JlRmllbGRzTGVuZ3RoIiwic2l0ZWNvcmVGaWVsZHMiLCJjb21wb25lbnRMZW5ndGgiLCJjb21wb25lbnQiLCJkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImhhc0Jsb2JUb2tlbiIsInByb2Nlc3MiLCJlbnYiLCJCTE9CX1JFQURfV1JJVEVfVE9LRU4iLCJibG9iIiwiSlNPTiIsInN0cmluZ2lmeSIsImFjY2VzcyIsImFkZFJhbmRvbVN1ZmZpeCIsInVybCIsInN0b3JhZ2VEaXIiLCJqb2luIiwiY3dkIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImZpbGVQYXRoIiwid3JpdGVGaWxlU3luYyIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJnZXRSZXN1bHRzIiwiYmxvYnMiLCJwcmVmaXgiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwicmVzdWx0IiwianNvbiIsIm9uZUhvdXJBZ28iLCJ0b0lTT1N0cmluZyIsImZpbGVDb250ZW50IiwicmVhZEZpbGVTeW5jIiwicGFyc2UiLCJ1bmxpbmtTeW5jIiwiY2xlYW51cE9sZFJlc3VsdHMiLCJkZWxldGVkQ291bnQiLCJsaXN0UmVzdWx0cyIsIm1hcCIsInNwbGl0IiwicG9wIiwicmVwbGFjZSIsInVwbG9hZGVkQXQiLCJnZXRUaW1lIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsImZpbHRlciIsImZpbGUiLCJlbmRzV2l0aCIsInN0YXRzIiwic3RhdFN5bmMiLCJtdGltZU1zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/storage.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/undici","vendor-chunks/@fastify","vendor-chunks/@vercel","vendor-chunks/formdata-node","vendor-chunks/retry","vendor-chunks/uuid","vendor-chunks/async-retry","vendor-chunks/throttleit","vendor-chunks/is-node-process","vendor-chunks/is-buffer","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fconvert%2Froute&page=%2Fapi%2Fconvert%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconvert%2Froute.ts&appDir=C%3A%5CReact%20app%5Chackathon-codegen-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReact%20app%5Chackathon-codegen-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();